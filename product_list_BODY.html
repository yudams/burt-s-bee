<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burt's Bees</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/variable.css">
    <link rel="stylesheet" href="./css/media.css">

    <!-- font -->
    <!-- Playfair Display -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
        rel="stylesheet">
    <!-- Pretendard -->
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script src="./js/index.js"></script>
    <script src="./js/fixed_menu.js"></script>
    <script src="./js/product_list.js"></script>
    <script src="./js/fill_favorite.js"></script>



    <!-- 파비콘 -->
    <link rel="icon" sizes="32x32" href="./images/favicon.png" type="image/png">

</head>

<body>
    <aside class="fixed_menu">
        <a href="#">
            <img src="./images/icn_up.svg" alt="위로가기 버튼" id="btn_up">
        </a>
    </aside>
    <header>
        <h1 class="logo commonFrame">
            <a href="./index.html">
                <img src="./images/logo_W.png" alt="burt's bees">
            </a>
        </h1>
        <ul class="commonFrame gnb">
            <li>
                <a href="./product_list_best.html" class="playfair-display">New & Best</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="./product_list_best.html">New & Best</a>
                            </h3>
                            <p>자연에서 온 순수한 보습</p>
                        </div>
                        <span></span>
                    </section>
                    <section class="dp2_right">
                        <img src="./images/img-new.jpg" alt="버츠비 카밍 라벤더 앤 허니 바디 워시">
                        <p>버츠비 카밍 라벤더 앤 허니 바디 워시</p>
                    </section>
                </div>
            </li>
            <li>
                <a href="./product.html" class="playfair-display">Products</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="./product.html">Products</a>
                            </h3>
                            <p>자연의 힘을 담은 버츠비 제품들을 만나보세요. 피부 본연의 아름다움을 지켜주는 선택.</p>
                        </div>
                        <span></span>
                        <ul>
                            <li><a href="./product_list_LIPBALM.html?cate=LIPBALM&tags=전체">LIP BALM</a></li>
                            <li><a href="./product_list_BODY.html?cate=BODY&tags=전체">BODY CARE</a></li>
                            <li><a href="./product_list_MAMAnBABY.html?cate=MAMAnBABY&tags=전체">MAMA & BABY</a></li>
                        </ul>
                    </section>
                    <section class="dp2_right">
                        <img src="./images/img-products.jpg" alt="버츠비 모이스춰라이징 립밤">
                        <p>버츠비 모이스춰라이징 립밤</p>
                    </section>
                </div>
            </li>
            <li>
                <a href="./burts_classic.html" class="playfair-display">Burt's Classic</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="/burts_classic.html">Burt's Classic</a>
                            </h3>
                            <p>시간이 지나도 변하지 않는 사랑을 받아 버츠비의 클래식 제품.</p>
                        </div>
                        <span></span>
                        <ul>
                            <li><a href="./classic-res-q.html">Res-Q Ointment</a></li>
                            <li><a href="./classic-lemon.html">LemonButter Cuticle Cream</a></li>
                            <li><a href="./classic-beswax.html">Beswax Lip balm</a></li>
                        </ul>
                    </section>
                    <section class="dp2_right">
                        <img src="./images/img-classic.jpg" alt="버츠비 레몬버터 큐티클 크림">
                        <p>버츠비 레몬버터 큐티클 크림</p>
                    </section>
                </div>
            </li>
            <li>
                <a href="./our_story.html" class="playfair-display">Our story</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="./our_story.html">Our story</a>
                            </h3>
                            <p>자연이 가장 좋은 해답을 가지고 있다는 믿음으로.</p>
                        </div>
                        <span></span>
                        <ul>
                            <li><a href="#">about BURT’S BEES</a></li>
                            <li><a href="./our_story.html">Our value</a></li>
                            <li><a href="#">Bring back the bees</a></li>
                        </ul>
                    </section>
                    <section class="dp2_right">
                        <img src="./images/img-story.jpg" alt="버츠비의 이야기">
                        <p>ㅤ</p>
                    </section>
                </div>
            </li>
            <li>
                <a href="#" class="playfair-display">Search</a>
                <div class="depth2 search">
                    <form action="#" class="search_form">
                        <label for="search"></label>
                        <input type="text" id="search" placeholder="검색어를 입력해 주세요.">
                        <button type="submit" class="btn_search">
                            <img src="./images/icn_Search.svg" alt="돋보기 모양 검색 버튼">
                        </button>
                    </form>
                    <p>추천검색어</p>
                    <ul class="search_tag">
                        <li>
                            <a href="./product_list_tag.html?tags=립밤">#립밤</a>
                        </li>
                        <li>
                            <a href="./product_list_tag.html?tags=레스큐">#레스큐</a>
                        </li>
                        <li>
                            <a href="./product_list_tag.html?tags=상큼한">#상큼한</a>
                        </li>
                        <li>
                            <a href="./product_list_tag.html?tags=시어버터">#시어버터</a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </header>
    <div class="mo_gnb">
        <div class="mo_gnb_top">
            <h1 class="logo commonFrame">
                <a href="./index.html">
                    <img src="./images/logo_W.png" alt="burt's bees">
                </a>
            </h1>
            <span class="btn_gnb_open">
                <img src="./images/icn_arrow.svg" alt="메뉴로가기">
            </span>
        </div>
        <ul class="commonFrame mo_gnb_mid">
            <li>
                <a href="./product_list_best.html" class="playfair-display">New & Best</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="./product_list_best.html">New & Best</a>
                            </h3>
                            <p>지금 가장 사랑받는 제품과 자연에서 온 새로운 선물을 만나보세요.</p>
                        </div>
                        <span></span>
                    </section>
                    <section class="dp2_right">
                        <a href="./product_detail.html?pid=13"><img src="./images/img-new.jpg"
                                alt="버츠비 카밍 라벤더 앤 허니 바디 워시"></a>
                        <p>버츠비 카밍 라벤더 앤 허니 바디 워시</p>
                    </section>
                </div>
            </li>
            <li>
                <a href="#" class="playfair-display">Products</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="./product.html">Products</a>
                            </h3>
                            <p>자연의 힘을 담은 버츠비 제품들을 만나보세요. 피부 본연의 아름다움을 지켜주는 선택.</p>
                        </div>
                        <span></span>
                        <ul>
                            <li><a href="./product_list_LIPBALM.html?cate=LIPBALM&tags=전체">LIP BALM</a></li>
                            <li><a href="./product_list_BODY.html?cate=BODY&tags=전체">BODY CARE</a></li>
                            <li><a href="./product_list_MAMAnBABY.html?cate=MAMAnBABY&tags=전체">MAMA & BABY</a></li>
                        </ul>
                    </section>
                    <section class="dp2_right">
                        <img src="./images/img-products.jpg" alt="버츠비 모이스춰라이징 립밤">
                        <p>버츠비 모이스춰라이징 립밤</p>
                    </section>
                </div>
            </li>
            <li>
                <a href="./burts_classic.html" class="playfair-display">Burt's Classic</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="/burts_classic.html">Burt's Classic</a>
                            </h3>
                            <p>시간이 지나도 변하지 않는 사랑을 받아 버츠비의 클래식 제품.</p>
                        </div>
                        <span></span>
                        <ul>
                            <li><a href="./classic-res-q.html">Res-Q Ointment</a></li>
                            <li><a href="./classic-lemon.html">LemonButter Cuticle Cream</a></li>
                            <li><a href="./classic-beswax.html">Beswax Lip balm</a></li>
                        </ul>
                    </section>
                    <section class="dp2_right">
                        <img src="./images/img-classic.jpg" alt="버츠비 레몬버터 큐티클 크림">
                        <p>버츠비 레몬버터 큐티클 크림</p>
                    </section>
                </div>
            </li>
            <li>
                <a href="./our_story.html" class="playfair-display">Our story</a>
                <div class="depth2">
                    <section class="dp2_left">
                        <div>
                            <h3 class="playfair-display">
                                <a href="./our_story.html">Our story</a>
                            </h3>
                            <p>자연이 가장 좋은 해답을 가지고 있다는 믿음으로.</p>
                        </div>
                        <span></span>
                        <ul>
                            <li><a href="./our_story.html">about BURT’S BEES</a></li>
                            <li><a href="./our_story.html">Our value</a></li>
                            <li><a href="./our_story.html">Bring back the bees</a></li>
                        </ul>
                    </section>
                    <section class="dp2_right">
                        <img src="./images/img-story.jpg" alt="버츠비의 이야기">
                        <p>ㅤ</p>
                    </section>
                </div>
            </li>
            <li class="search">
                <a href="#" class="playfair-display">Search</a>
                <div class="depth2 search">
                    <form action="#" class="search_form">
                        <label for="search"></label>
                        <input type="text" id="search" placeholder="검색어를 입력해 주세요.">
                        <button type="submit" class="btn_search">
                            <img src="./images/icn_Search.svg" alt="돋보기 모양 검색 버튼">
                        </button>
                    </form>
                    <p>추천검색어</p>
                    <ul class="search_tag">
                        <li>
                            <a href="./product_list_tag.html?tags=립밤">#립밤</a>
                        </li>
                        <li>
                            <a href="./product_list_tag.html?tags=레스큐">#레스큐</a>
                        </li>
                        <li>
                            <a href="./product_list_tag.html?tags=상큼한">#상큼한</a>
                        </li>
                        <li>
                            <a href="./product_list_tag.html?tags=시어버터">#시어버터</a>
                        </li>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
    <main>
        <div class="sub_banner sub1">
            <div class="banner_txt" data-category="BODY">
                <h2>BODYCARE</h2>
                <p>피부 본연의 아름다움을 지켜주는 선택 버츠비.</p>
            </div>
        </div>
        <section class="commonFrame list_wrap">
            <div class="fliter_tab_tag">
                <a href="./product_list_BODY.html?cate=BODY&tags=전체">전체</a>
                <a href="./product_list_BODY.html?cate=BODY&tags=바디케어">바디케어</a>
                <a href="./product_list_BODY.html?cate=BODY&tags=핸드케어">핸드케어</a>
                <a href="./product_list_BODY.html?cate=BODY&tags=레스큐">레스큐</a>
            </div>
            <ul class="product_list body" id="body_list"></ul>

        </section>

        <script>
            // DOM 요소 가져오기
            let productList = document.querySelector("#body_list");
            let filterLinks = document.querySelectorAll(".fliter_tab_tag a");

            // URL에서 카테고리와 태그 키워드 가져오기
            let category = decodeURIComponent(location.href.split("?")[1].split("&")[0].split("=")[1]);
            let tagKeyword = decodeURIComponent(location.href.split("?")[1].split("&")[1].split("=")[1]);

            // 필터링된 결과 생성
            let filteredProducts = product_array.filter(product =>
                product.pcategory === category &&
                (tagKeyword === "전체" || product.ptags.includes(tagKeyword))
            );

            // 필터링된 결과가 없으면 전체 제품 출력
            let result = (filteredProducts.length > 0 ? filteredProducts : product_array).map(product => `
    <li>
        <a href="./product_detail.html?pid=${product.pid}">
            <figure>
                <span class="favorite">
                    <img src="./images/favorite.svg" alt="favorite">
                </span>
                <img src="./images/${product.pimg_file_name}" alt="${product.pname}">
            </figure>
        </a>
        <a href="./product_detail.html?pid=${product.pid}">
            <h3>${product.pname}</h3>
        </a>
        <p>${product.pdesc}</p>
    </li>
`).join("");

            // 결과를 DOM에 삽입
            productList.innerHTML = result;

            // 필터링 버튼 스타일 업데이트
            filterLinks.forEach(link => {
                // href에서 태그 값을 추출
                let tagFromHref = new URL(link.href).searchParams.get("tags");

                // 현재 태그와 일치하면 'active' 클래스 추가, 아니면 제거
                if (tagFromHref === tagKeyword) {
                    link.classList.add("active");
                } else {
                    link.classList.remove("active");
                }
            });

            //     let productList = document.querySelector("#body_list");
            //     let category = decodeURIComponent(location.href.split("?")[1].split("&")[0].split("=")[1])
            //     let tag_keyword = decodeURIComponent(location.href.split("?")[1].split("&")[1].split("=")[1])


            //     // URL에서 키워드 가져오기


            //     // 필터링된 결과
            //     let filteredProducts = product_array.filter(product =>
            //         product.pcategory === category && product.ptags.includes(tag_keyword)
            //         // ptags에 tag_keyword가 포함된 객체만 필터링
            //     );
            //     console.log(filteredProducts)
            //     // 결과 렌더링
            //     let result = (filteredProducts.length > 0  ? filteredProducts : product_array).map(product => `
            //     <li>
            //         <a href="./product_detail.html?pid=${product.pid}">
            //             <figure>
            //                 <span class="favorite">
            //                     <img src="./images/favorite.svg" alt="favorite">
            //                 </span>
            //                 <img src="./images/${product.pimg_file_name}" alt="${product.pname}">
            //             </figure>
            //         </a>
            //         <a href="./product_detail.html?pid=${product.pid}">
            //             <h3>${product.pname}</h3>
            //         </a>
            //         <p>${product.pdesc}</p>
            //     </li>
            // `).join("");
            //     // 필터링된 결과를 DOM에 삽입
            //     productList.innerHTML = result;

            // 필터링된 결과가 없을 경우 메시지 출력
            if (filteredProducts.length === 0) {
                productList.innerHTML = `<p>해당 키워드를 가진 제품이 없습니다.</p>`;
            }

        </script>

    </main>
    <footer>
        <div class="commonFrame">
            <section class="foot1">
                <ul>
                    <li><a href="#">이용약관</a></li>
                    <li><a href="#">개인 정보 정책</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
                <div class="copy">© 2024 Burt’s Bees, All Rights Reserved.
                    <p>이 홈페이지는 포트폴리오 목적으로 제작되었습니다. designer 서유담</p>
                </div>
            </section>
            <section class="foot2">
                <p>The Greater Good</p>
                <h1 class="foot_logo">
                    <a href="./index.html">
                        <img src="./images/logo_W.png" alt="burt's bees 하단로고">
                    </a>
                </h1>
                <ul class="foot_sns">
                    <li>
                        <a href="#"><img src="./images/icn_insta.svg" alt="인스타그램"></a>
                    </li>
                    <li>
                        <a href="#"><img src="./images/icn-facebook.svg" alt="페이스북"></a>
                    </li>
                    <li>
                        <a href="#"><img src="./images/icn_youtube.svg" alt="유튜브"></a>
                    </li>
                </ul>
            </section>
        </div>
    </footer>
</body>

</html>